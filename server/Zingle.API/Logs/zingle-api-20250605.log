2025-06-05 09:29:40.664 +07:00 [INF] Migrating database...
2025-06-05 09:29:41.347 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-05 09:29:41.382 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-05 09:29:41.387 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-06-05 09:29:41.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-06-05 09:29:41.431 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-06-05 09:29:41.454 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-06-05 09:29:41.736 +07:00 [INF] Executed DbCommand (71ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-05 09:29:41.781 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-06-05 09:29:41.802 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.873 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.881 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.884 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:29:41.914 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Chats] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-06-05 09:29:41.919 +07:00 [INF] Database initialized successfully
2025-06-05 09:29:42.063 +07:00 [WRN] The WebRootPath was not found: D:\Work\ProfessionalProject\Zingle-App\server\Zingle.API\wwwroot. Static files may be unavailable.
2025-06-05 09:29:42.099 +07:00 [INF] Now listening on: http://localhost:5024
2025-06-05 09:29:42.100 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-05 09:29:42.101 +07:00 [INF] Hosting environment: Development
2025-06-05 09:29:42.102 +07:00 [INF] Content root path: D:\Work\ProfessionalProject\Zingle-App\server\Zingle.API
2025-06-05 09:29:56.443 +07:00 [WRN] Failed to determine the https port for redirect.
2025-06-05 09:31:50.809 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:31:59.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:31:59.667 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 09:31:59.673 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 09:31:59.758 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 09:31:59.806 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 09:32:35.476 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 09:32:51.395 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 09:33:48.023 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], COALESCE([a].[UserName], N'') AS [Username], [a].[DisplayName], [a].[AvatarUrl], [a].[IsOnline], [a].[LastActive], [a].[Bio]
FROM [AspNetUsers] AS [a]
2025-06-05 10:19:49.617 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:19:49.673 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:19:49.676 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:19:49.684 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:19:49.690 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:21:48.357 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:21:48.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:21:48.419 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.265 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.269 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:22:21.326 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:22:21.328 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.346 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = DateTime2), @p6='?' (Size = 4000), @p7='?' (Size = 256), @p8='?' (DbType = Boolean), @p9='?' (DbType = Boolean), @p10='?' (DbType = DateTime2), @p11='?' (DbType = Boolean), @p12='?' (DbType = DateTimeOffset), @p13='?' (Size = 256), @p14='?' (Size = 256), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [AvatarUrl], [Bio], [ConcurrencyStamp], [CreatedAt], [DisplayName], [Email], [EmailConfirmed], [IsOnline], [LastActive], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-06-05 10:22:21.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-06-05 10:22:21.371 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2025-06-05 10:22:21.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-06-05 10:22:21.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:22:21.387 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.406 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p22='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p23='?' (Size = 4000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 4000), @p8='?' (Size = 256), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTime2), @p12='?' (DbType = Boolean), @p13='?' (DbType = DateTimeOffset), @p14='?' (Size = 256), @p15='?' (Size = 256), @p16='?' (Size = 4000), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 4000), @p20='?' (DbType = Boolean), @p21='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [AvatarUrl] = @p3, [Bio] = @p4, [ConcurrencyStamp] = @p5, [CreatedAt] = @p6, [DisplayName] = @p7, [Email] = @p8, [EmailConfirmed] = @p9, [IsOnline] = @p10, [LastActive] = @p11, [LockoutEnabled] = @p12, [LockoutEnd] = @p13, [NormalizedEmail] = @p14, [NormalizedUserName] = @p15, [PasswordHash] = @p16, [PhoneNumber] = @p17, [PhoneNumberConfirmed] = @p18, [SecurityStamp] = @p19, [TwoFactorEnabled] = @p20, [UserName] = @p21
OUTPUT 1
WHERE [Id] = @p22 AND [ConcurrencyStamp] = @p23;
2025-06-05 10:22:21.417 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:22:21.427 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.482 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-06-05 10:22:21.497 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:22:21.500 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:22:21.504 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:22:21.508 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:22:21.511 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:22:36.266 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:25:45.721 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:25:45.789 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:25:45.792 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:25:45.799 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:25:45.803 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:26:03.704 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 10:26:05.358 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:26:05.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:26:46.275 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:26:46.275 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:26:48.568 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:26:48.569 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:26:48.976 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:26:48.997 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:27:00.876 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:28:15.782 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:28:42.025 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:28:42.085 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:28:42.088 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:28:42.093 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:28:42.098 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:28:42.156 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:28:42.172 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:28:42.186 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:29:24.294 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:29:24.297 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:29:24.327 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:29:24.358 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:29:24.369 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:29:24.383 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:29:24.394 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:29:24.428 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:29:28.269 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:29:28.270 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:29:28.281 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:29:28.287 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:29:28.294 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:29:28.308 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:29:28.323 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:29:28.339 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:31:30.074 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:31:30.074 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:31:30.074 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:31:30.074 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:31:30.074 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:31:30.075 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:31:30.271 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:31:30.276 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:31:41.814 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:31:41.871 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:31:41.873 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:31:41.880 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:31:41.886 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:31:41.965 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:31:41.969 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:31:41.987 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:32:04.381 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:32:04.381 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:32:04.565 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:32:04.569 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:32:11.973 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:32:12.027 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:32:12.030 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:32:12.036 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:32:12.041 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:32:12.087 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:32:12.092 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:32:12.100 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:33:18.331 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:33:18.332 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:33:19.288 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:33:19.302 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:48:50.085 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:48:50.141 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 10:48:50.144 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 10:48:50.149 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 10:48:50.155 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 10:48:50.223 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 10:48:50.228 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 10:48:50.237 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:48:51.545 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 10:48:51.547 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 10:48:51.551 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 10:48:51.552 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 10:48:51.562 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 10:48:51.563 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 10:48:51.571 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 10:53:38.292 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 10:53:38.297 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 11:05:57.212 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 11:05:57.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-06-05 11:05:57.278 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-06-05 11:05:57.284 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p20='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p21='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime2), @p10='?' (DbType = Boolean), @p11='?' (DbType = DateTimeOffset), @p12='?' (Size = 256), @p13='?' (Size = 256), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Boolean), @p17='?' (Size = 4000), @p18='?' (DbType = Boolean), @p19='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarUrl] = @p1, [Bio] = @p2, [ConcurrencyStamp] = @p3, [CreatedAt] = @p4, [DisplayName] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [IsOnline] = @p8, [LastActive] = @p9, [LockoutEnabled] = @p10, [LockoutEnd] = @p11, [NormalizedEmail] = @p12, [NormalizedUserName] = @p13, [PasswordHash] = @p14, [PhoneNumber] = @p15, [PhoneNumberConfirmed] = @p16, [SecurityStamp] = @p17, [TwoFactorEnabled] = @p18, [UserName] = @p19
OUTPUT 1
WHERE [Id] = @p20 AND [ConcurrencyStamp] = @p21;
2025-06-05 11:05:57.290 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 11:05:57.354 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 11:05:57.358 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 11:05:57.367 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 11:05:58.437 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:05:58.440 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:05:58.442 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:05:58.443 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:01.354 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:01.354 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:01.358 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:01.360 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:19.978 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 11:06:19.978 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 11:06:19.979 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 11:06:20.200 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 11:06:20.205 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 11:06:20.208 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 11:06:20.211 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 11:06:20.281 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 11:06:20.299 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 11:06:20.316 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 11:06:21.200 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 11:06:21.200 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 11:06:21.331 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 11:06:21.334 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 11:06:21.348 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2025-06-05 11:06:21.353 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-06-05 11:06:21.405 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[ChatId], [c].[CustomNickname], [c].[IsAdmin], [c].[JoinedAt], [c].[LastReadMessageTime], [c].[UserId], [c0].[Id], [c0].[AppUserId], [c0].[AvatarUrl], [c0].[CreatedAt], [c0].[IsGroupChat], [c0].[LastActivity], [c0].[Name], [t].[Id], [t].[ChatId], [t].[CustomNickname], [t].[IsAdmin], [t].[JoinedAt], [t].[LastReadMessageTime], [t].[UserId], [t].[Id0], [t].[AccessFailedCount], [t].[AvatarUrl], [t].[Bio], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DisplayName], [t].[Email], [t].[EmailConfirmed], [t].[IsOnline], [t].[LastActive], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [t0].[Id], [t0].[ChatId], [t0].[Content], [t0].[FileName], [t0].[FileSize], [t0].[FileUrl], [t0].[ImageUrl], [t0].[SenderId], [t0].[Timestamp], [t0].[Type], [t0].[Id0], [t0].[AccessFailedCount], [t0].[AvatarUrl], [t0].[Bio], [t0].[ConcurrencyStamp], [t0].[CreatedAt], [t0].[DisplayName], [t0].[Email], [t0].[EmailConfirmed], [t0].[IsOnline], [t0].[LastActive], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName]
FROM [ChatParticipants] AS [c]
INNER JOIN [Chats] AS [c0] ON [c].[ChatId] = [c0].[Id]
LEFT JOIN (
    SELECT [c1].[Id], [c1].[ChatId], [c1].[CustomNickname], [c1].[IsAdmin], [c1].[JoinedAt], [c1].[LastReadMessageTime], [c1].[UserId], [a].[Id] AS [Id0], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
    FROM [ChatParticipants] AS [c1]
    INNER JOIN [AspNetUsers] AS [a] ON [c1].[UserId] = [a].[Id]
) AS [t] ON [c0].[Id] = [t].[ChatId]
OUTER APPLY (
    SELECT [t1].[Id], [t1].[ChatId], [t1].[Content], [t1].[FileName], [t1].[FileSize], [t1].[FileUrl], [t1].[ImageUrl], [t1].[SenderId], [t1].[Timestamp], [t1].[Type], [a0].[Id] AS [Id0], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
    FROM (
        SELECT TOP(1) [m].[Id], [m].[ChatId], [m].[Content], [m].[FileName], [m].[FileSize], [m].[FileUrl], [m].[ImageUrl], [m].[SenderId], [m].[Timestamp], [m].[Type]
        FROM [Messages] AS [m]
        WHERE [c0].[Id] = [m].[ChatId]
        ORDER BY [m].[Timestamp] DESC
    ) AS [t1]
    INNER JOIN [AspNetUsers] AS [a0] ON [t1].[SenderId] = [a0].[Id]
) AS [t0]
WHERE [c].[UserId] = @__userId_0
ORDER BY [c].[Id], [c0].[Id], [t].[Id], [t].[Id0], [t0].[Timestamp] DESC, [t0].[Id]
2025-06-05 11:06:21.415 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to ChatHub
2025-06-05 11:06:21.436 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 connected to CallHub
2025-06-05 11:06:31.125 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:31.125 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:31.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:31.131 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:41.181 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:41.182 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:41.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:41.189 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:49.208 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:49.208 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:49.218 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:49.220 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:51.628 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:51.629 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:06:51.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[User1Id], [f].[User2Id], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [Friendships] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[User1Id] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[User2Id] = [a0].[Id]
WHERE [f].[User1Id] = @__userId_0 OR [f].[User2Id] = @__userId_0
2025-06-05 11:06:51.636 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [f].[Id], [f].[CreatedAt], [f].[FromUserId], [f].[RespondedAt], [f].[Status], [f].[ToUserId], [a].[Id], [a].[AccessFailedCount], [a].[AvatarUrl], [a].[Bio], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DisplayName], [a].[Email], [a].[EmailConfirmed], [a].[IsOnline], [a].[LastActive], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a0].[Id], [a0].[AccessFailedCount], [a0].[AvatarUrl], [a0].[Bio], [a0].[ConcurrencyStamp], [a0].[CreatedAt], [a0].[DisplayName], [a0].[Email], [a0].[EmailConfirmed], [a0].[IsOnline], [a0].[LastActive], [a0].[LockoutEnabled], [a0].[LockoutEnd], [a0].[NormalizedEmail], [a0].[NormalizedUserName], [a0].[PasswordHash], [a0].[PhoneNumber], [a0].[PhoneNumberConfirmed], [a0].[SecurityStamp], [a0].[TwoFactorEnabled], [a0].[UserName]
FROM [FriendRequests] AS [f]
INNER JOIN [AspNetUsers] AS [a] ON [f].[FromUserId] = [a].[Id]
INNER JOIN [AspNetUsers] AS [a0] ON [f].[ToUserId] = [a0].[Id]
WHERE [f].[ToUserId] = @__userId_0 AND [f].[Status] = 0
2025-06-05 11:07:03.576 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from ChatHub
2025-06-05 11:07:03.576 +07:00 [INF] User cf788d74-2a6c-4ee5-b562-db51df391bb3 disconnected from CallHub
2025-06-05 13:41:32.939 +07:00 [INF] Application is shutting down...
